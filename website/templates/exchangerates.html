<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
     <link rel="icon" sizes="16x16" href="{{ url_for('static', filename='/img/favicon.ico') }}">
    <script src="{{ url_for('static', filename='jquery-3.4.1.min.js') }}"></script>
    <script src="{{ url_for('static', filename='angular.min.js') }}"></script>
<style>
      body {
      background-color: #212121;
      color: white
      }
</style>
<script>
    var app = angular.module("App", []);
    app.controller("ExchangeRates", ["$scope", "$http", "$filter", function ($scope, $http, $filter) {
        LoadData();
        function LoadData() {
            document.getElementById('conn').style.visibility = "visible";
            $http({
                method: 'GET',
                url: "/GetExchangeRates",
                dataType: "json"
            }).then(function (d) {
                $scope.Data = d.data.data;
                if (d.data === 0) {
                    $scope.ShowData = false;
                }
                else {
                    if (d.data === -1) {
                        $scope.ShowData = false;
                    }
                    else {
                        if (d.data.length === 0) {
                            $scope.ShowData = false;
                        }
                        else {
                            $scope.ShowData = true;
                        }
                    }
                }
                document.getElementById('conn').style.visibility = "hidden";
            }, function (error) {
                console.log("error in GetExchangeRates -> ", error);
                document.getElementById('conn').style.visibility = "hidden";
            });
        };
    }]);

</script>
    <div id="conn" style="visibility:hidden;position:absolute;margin-left:45%;margin-top:20%;z-index:9999">
        <img src="{{ url_for('static', filename='/img/buffering.gif') }}" />
    </div>
    <input id="hh" type="hidden" />
<h2>Exchange rates of the Central Bank of the Republic of Uzbekistan
    <a href="https://play.google.com/store/apps/details?id=exchangerates.complexprogrammer.uz" target="_blank">
    <img src="/static/img/google-play.svg" />
</a></h2>
<div ng-app="App" ng-controller="ExchangeRates">
    {% raw %}
    <table class="table table-hover table-dark" ng-show="ShowData">
        <thead>
            <tr>
                <th>â„–</th>
                <th scope="col">Name of currencies</th>
                <th scope="col">Symbolic code</th>
                <th scope="col">Digital code</th>
                <th scope="col">Differensial</th>
                <th scope="col">Rate</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="item in Data">
                <td>{{$index+1}}</td>
                <td>
                    <i>
                        <svg style="width:24px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                            <use ng-href="/static/flag_image/symbol_defs.svg#icon-currency-{{item.Ccy}}" xlink:href="" xmlns:xlink="http://www.w3.org/1999/xlink"></use>
                        </svg>
                    </i>
                    {{item.Nominal}}
                    <span>{{item.CcyNm_UZ}}</span>
                </td>
                <td>{{item.Ccy}}</td>
                <td>{{item.Code}}</td>
                <td>
                    <div ng-if="item.Diff>0" style="color:green">
                        +{{item.Diff}}
                        <i>
                            <svg style="width:24px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                                <use xlink:href="/static/icons/sprite_icons.svg#icon__chart_up" xmlns:xlink="http://www.w3.org/1999/xlink"></use>
                            </svg>
                        </i>
                    </div>
                    <div ng-if="item.Diff==0" style="color:gray">
                        {{item.Diff}}
                        <i>
                            <svg style="width:24px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                                <use xlink:href="/static/icons/sprite_icons.svg#icon__minus" xmlns:xlink="http://www.w3.org/1999/xlink"></use>
                            </svg>
                        </i>
                    </div>
                    <div ng-if="item.Diff<0" style="color:red">
                        {{item.Diff}}
                        <i>
                            <svg style="width:24px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                                <use xlink:href="/static/icons/sprite_icons.svg#icon__chart_down" xmlns:xlink="http://www.w3.org/1999/xlink"></use>
                            </svg>
                        </i>
                    </div>

                </td>
                <td>{{item.Rate}} so'm</td>
            </tr>
        </tbody>
    </table>
    {% endraw %}
</div>
